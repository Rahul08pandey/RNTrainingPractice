import React, {useState} from 'react';
import {
  Modal,
  View,
  TextInput,
  StyleSheet,
  TouchableOpacity,
  Text,
} from 'react-native';
import Ionicons from 'react-native-vector-icons/Ionicons';

export default PharmacyModal = ({isVisible, onClose, onAddUser}) => {
  const [pharmacyData, setMedicineData] = useState({
    pharmacyName: '',
    medicineCategory: [
      {
        medicineCategoryType: '',
        medicineNames: [{name: ''}],
      },
    ],
  });

  const handleSavePharmacyData = () => {
    onAddUser();
    onClose();
    console.log('hlo');
  };

  return (
    <Modal animationType="slide" visible={isVisible}>
      <View style={{flex: 1, padding: 10}}>
        <View style={styles.headContainer}>
          <Text style={styles.heading}>Pharmacy Data:</Text>
        </View>
        <View
          style={{
            flex: 0.8,
            // backgroundColor: 'blue'
          }}>
          <Text
            style={{
              fontSize: 22,
              color: 'black',
              fontFamily: 'PlaypenSans-Medium',
            }}>
            Enter Medicine Name :
          </Text>
          <TextInput
            style={styles.pharmacyNameInput}
            placeholder="Enter Medicine Name"
            value={pharmacyData.pharmacyName}
            onChangeText={text =>
              setMedicineData(prevName =>
                Object.assign({}, prevName, {pharmacyName: text}),
              )
            }
          />
          <Text
            style={{
              fontSize: 22,
              color: 'black',
              fontFamily: 'PlaypenSans-Medium',
            }}>
            Enter Medicine Category:
          </Text>

          <View style={styles.medicineCategoryContainer}>
            <TextInput
              //   key={index}
              style={styles.medicineCategoryInput}
              placeholder="Enter Your Hobbies"
              // value={hobby.name}
              onChangeText={text => {
                const updateMedicineCategory = [
                  ...pharmacyData.medicineCategory,
                ];
                updateMedicineCategory[index].name = text;
                setMedicineData(prevMedicineType =>
                  Object.assign({}, prevMedicineType, {
                    medicineCategory: updateMedicineCategory,
                  }),
                );
              }}
            />
            <View
              style={{
                flex: 0.15,
                alignItems: 'center',
                justifyContent: 'center',
                backgroundColor: 'orange',
                color: 'white',
                borderWidth: 1,
                borderRadius: 10,
              }}>
              {/* {index === pharmacyData.medicineCategory.length - 1 && ( */}
              <TouchableOpacity
              // onPress={addMedicineCategory}
              >
                <Text style={{}}>Add More</Text>
              </TouchableOpacity>
              {/* )} */}
            </View>
          </View>
        </View>
        <View
          style={{
            flex: 0.05,
            // backgroundColor: 'green'
          }}>
          <TouchableOpacity
            onPress={handleSavePharmacyData}
            style={styles.savePharmacyDataButton}>
            <Text style={styles.btnTxt}>Save Data</Text>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
};

const styles = StyleSheet.create({
  headContainer: {
    flex: 0.15,
    alignContent: 'center',
    justifyContent: 'center',
    // backgroundColor: 'black',
  },

  heading: {
    fontSize: 40,
    textAlign: 'center',
    color: 'green',
    fontFamily: 'Lugrasimo-Regular',
    // backgroundColor: 'red',
  },

  pharmacyNameInput: {
    borderRadius: 10,
    fontSize: 16,
    borderWidth: 2,
    paddingLeft: 10,
    backgroundColor: '#d3d3d3',
    // width: '100%',
  },

  medicineCategoryInput: {
    flex: 0.82,
    backgroundColor: '#d3d3d3',
    borderRadius: 10,
    fontSize: 16,
    borderWidth: 2,
    paddingLeft: 10,
    // borderRadius: 10,
    // fontSize: 16,
    // width: '80%',
    // borderWidth: 2,
    // paddingLeft: 10,
    // backgroundColor: '#d3d3d3',
  },

  medicineCategoryContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginBottom: 5,
    // alignItems: 'center',
  },

  savePharmacyDataButton: {
    alignItems: 'center',
    justifyContent: 'center',
    borderRadius: 20,
    padding: 10,
    // backgroundColor: 'green',
  },

  btnTxt: {
    color: 'black',
    fontSize: 18,
  },
});
